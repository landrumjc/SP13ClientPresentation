<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/knockout-2.2.1.js"></script>
    <link href="css/metro-bootstrap-custom.css" rel="stylesheet" />
    <title></title>
</head>
<body class="al">
    <h1>Knockout Repeater</h1>

    <div data-bind="foreach: Users">
        <fieldset>
            <legend data-bind="text: 'User ' + $index()"></legend>
            <div class="row">
                <div class="span2">First Name:</div>
                <div class="span3">
                    <input type="text" data-bind="value: FirstName, valueUpdate: 'afterkeydown'" />
                </div>
            </div>
            <div class="row">
                <div class="span2">Last Name:</div>
                <div class="span3">
                    <input type="text" data-bind="value: LastName, valueUpdate: 'afterkeydown'" />
                </div>
            </div>
        </fieldset>
    </div>
    <div data-bind="foreach: Users">
        <div>
            <h3 data-bind="text: FirstName() + ' ' + LastName()"></h3>
        </div>
    </div>

    <input type="button" class="btn btn-primary" value="Add User" data-bind="click: AddUser" />

    <script type="text/javascript">

        function ViewModel() {
            var self = this;
            self.User = function () {
                this.FirstName = ko.observable("");
                this.LastName = ko.observable("");
            };

            self.Users = ko.observableArray([]);

            self.AddUser = function () {
                self.Users.push(new self.User());
            };
        }

        $(document).ready(function () {
            ko.applyBindings(new ViewModel());
        });

    </script>
</body>
</html>